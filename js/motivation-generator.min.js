function motgen_load_image(){function h(){b=new Image;b.onload=m;b.src=c.result}function m(){function a(c,h){g.fillStyle="#000000";g.fillRect(0,0,d.width,d.height);var k,e=0;b.height>b.width?(k=parseInt(b.height/90),e=parseInt(b.height/167)):(k=parseInt(b.width/90),e=parseInt(b.width/167));11>k&&(k=11);3>e&&(e=3);g.lineWidth=e;g.strokeStyle="white";g.rect(c-k,b.height/10-k,b.width+2*k,b.height+2*k);g.stroke();h()}function h(a,e){g.drawImage(b,a,b.height/10);var c=new Image;c.id="motgen_background_picture";
c.src=d.toDataURL();c.style.display="none";for(var f=document.getElementById("motgen_poster_placeholder");f.firstChild;)f.removeChild(f.firstChild);f.insertBefore(c,f.firstChild);e()}var c=parseInt(document.getElementById("motgen_mainline_font_size").value),e=parseInt(document.getElementById("motgen_subline_font_size").value);(function(a){d.style.position="inherit";d.width=1<b.width/b.height?b.width+b.width/5:b.width+b.width/3;d.height=b.height+(2*c+e)+b.height/10+c/2;a()})(function(){var c=d.width/
2-b.width/2;a(c,function(){h(c,function(){d.style.display="block";document.getElementById("motgen_generator_form").style.display="block";f.style.display="none"})})})}function e(b){for(var a=document.getElementById("motgen_error_message_area");a.firstChild;)a.removeChild(a.firstChild);var c=document.createElement("p");c.innerHTML=b;a.appendChild(c);a.style.display="block"}var f=document.getElementById("motgen_loading_icon");f.style.display="inline";var d=document.getElementById("motgen_poster_canvas"),
g=d.getContext("2d");d.style.display="none";var a,c,b;if("function"!==typeof window.FileReader)e("Hey, Your browser seems out of date.");else if(a=document.getElementById("motgen_imgfile"))if(a.files)if(a.files[0])if(a.files[0].type.match("image.*"))document.getElementById("motgen_error_message_area").style.display="none",a=a.files[0],c=new FileReader,c.onload=h,c.readAsDataURL(a);else{f.style.display="none";e("This is not am image. Please select an image file.");for(a=document.getElementById("motgen_poster_placeholder");a.firstChild;)a.removeChild(a.firstChild);
document.getElementById("motgen_generator_form").style.display="none"}else f.style.display="none",e("Please select a file first.");else f.style.display="none",e("Hey, Your browser seems out of date.");else f.style.display="none",e("Um, it seems that there is no file input element.")}
function motgen_type_text(){var h=parseInt(document.getElementById("motgen_mainline_font_size").value),m=parseInt(document.getElementById("motgen_subline_font_size").value),e=document.getElementById("motgen_poster_mainline").value,f=document.getElementById("motgen_poster_subline").value,d=document.getElementById("motgen_poster_canvas"),g=document.getElementById("motgen_background_picture"),a=d.getContext("2d");a.clearRect(0,0,d.width,d.height);a.drawImage(g,0,0);a.font=h+"px FreeSerif";a.textAlign=
"center";a.fillStyle="white";var g=h/2,c=2*h+m,b=d.width/2;if(0==f.trim().length){var l=d.height-(g+c)/2+h/2;a.fillText(e.toUpperCase(),b,l)}else 0==e.trim().length?(l=d.height-(g+c)/2+h/2,a.fillText(f.toUpperCase(),b,l)):(l=d.height-(g+c)/2+h/2-m,a.fillText(e.toUpperCase(),b,l),l=d.height-(g+c)/2+h/2+m/2,a.font=m+"px FreeSerif",a.fillText(f,b,l))}
function motgen_submit_poster(){0!=document.getElementById("motgen_poster_mainline").value.trim().length&&(document.getElementById("motgen_created_poster").value=document.getElementById("motgen_poster_canvas").toDataURL("image/jpeg"),document.forms.motgen_generator_form.submit())};